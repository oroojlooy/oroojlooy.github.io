
<!DOCTYPE html>
<html lang="en">

<head>


<!-- Begin Jekyll SEO tag v2.2.0 -->
<title>Deep Learning for Newsvendor Problem | Afshin</title>
<meta property="og:title" content="Deep Learning for Newsvendor Problem" />
<meta name="author" content="Afshin" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="tested on pc/mobile in chrome" />
<meta property="og:description" content="tested on pc/mobile in chrome" />
<link rel="canonical" href="https://oroojlooy.github.io/blog/newsvednor" />
<meta property="og:url" content="https://oroojlooy.github.io/blog/newsvednor" />
<meta property="og:site_name" content="Afshin" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-04-29T00:00:00-04:00" />
<script type="application/ld+json">
{"@type": "BlogPosting",
"headline": "Deep Learning for Newsvendor Problem",
"author": {"@type": "Person",
"name": {"name":"Afshin","email":"oroojlooy@gmail.com"},
"datePublished": "2017-04-11T00:00:00-04:00",
"description": "tested on pc/mobile in chrome",
"publisher": {"@type": "Person",
"name": {"name":"Afshin","email":"oroojlooy@gmail.com"},
"logo": {"@type": "ImageObject",
"url": "https://oroojlooy.github.io/beer_game.png"}},
"mainEntityOfPage": {"@type": "WebPage",
"@id": "https://oroojlooy.github.io/blog/newsvednor"},
"url": "https://oroojlooy.github.io/blog/newsvednor"}</script>
<!-- End Jekyll SEO tag -->


<!-- https://t.co/dKP3o1e -->
<!-- <meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
<!--baidu-->
<!-- <meta name="baidu-site-verification" content="Ka0XbnDHIz"/> -->
<!--google-->
<!-- <meta name="google-site-verification" content="dK7A_nLs_W9jMkp4z0Igv6lbsPMEt750es5LsGDI4b8"/> -->
<!--bing-->
<!-- <meta name="msvalidate.01" content="69400DDE30F9991C776E715491BAAB85" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
      integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
      crossorigin="anonymous"> -->

<!--Load Mathjax-->

<style>
img {
    display: block;
    margin: 0 auto;
}
</style>

<script type="text/javascript"
        src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        config: ["MMLorHTML.js"],
        extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
        jax: ["input/TeX"],
        tex2jax: {
            inlineMath: [['$', '$'], ["\\(", "\\)"]],
            displayMath: [['$$', '$$'], ["\\[", "\\]"]],
            processEscapes: false
        },
        TeX: {
            TagSide: "right",
            TagIndent: ".8em",
            MultLineWidth: "85%",
            equationNumbers: {
                autoNumber: "AMS",
            },
            unicode: {
                fonts: "STIXGeneral,'Arial Unicode MS'"
            }
        },
        showProcessingMessages: false
    });
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    inlineMath: [['$','$']]
  }
});
</script>

<script type="text/javascript"
    src="http://www.maths.nottingham.ac.uk/personal/drw/LaTeXMathML.js">
</script>

<script type="text/javascript" src="http://latex.codecogs.com/latexit.js"></script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



</head>


<body>


        <nav>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/publications">Publications</a></li>
                <li><a href="/cv">CV</a></li>
                <li><a href="/blog">Blog</a></li>
            </ul>
        </nav>
        <div class="container">
            <div class="blurb">
                <font size="+2"> <p><em>  <b> Beer Game  </b> </em> </p> </font>
                <p>     The newsvendor problem optimizes the inventory of a perishable good. Perishable goods are those that have a limited selling season; they include fresh produce, newspapers, airline tickets, and fashion goods. The newsvendor problem assumes that the company purchases the goods at the beginning of  a time period and sells them during the period. 
                At the end of the period, unsold goods must be discarded, incurring a <i>holding cost</i>.
                In addition, if it runs out of the goods in the middle of the period, it incurs a <i>shortage cost</i>, losing potential profit.
                Therefore, the company wants to choose the order quantity that minimizes the expected sum of the two costs described above. The problem dates back to 1888. See Porteus (2008) for a history. <p>
                <!-- alt="The agents of beer game"  -->
                
                <p> The optimal order quantity for the newsvendor problem can be obtained by solving the following optimization problem:                    
                    <img src="http://mathurl.com/y7z7skg3.png">
                where $d$ is the random demand, $y$ is the order quantity, $c_p$ and $c_h$ are the per-unit shortage and holding costs (respectively). In the presence of the demand distribution, the optimal order quantity can be obtained by solving the optimization problem (Snyder and Shen 2018). In the classical version of the problem, the demand distribution (e.g., normal) and its parameters are either known or estimated using available data. </p> 

                <p>There are numerous extensions of this problem (see ???). One of the extension is <i> multi-dimensional features newsvendor problem</i>, in which the demand from each of the $n$ items comes with some additional information, e.g. weather conditions, day of the week, store location, etc.</p> 
                
                <script type="math/tex; mode=display">% <![CDATA[
                \begin{aligned}
                \dot{x} & = \sigma(y-x) \\
                \dot{y} & = \rho x - y - xz \\
                \dot{z} & = -\beta z + xy
                \end{aligned} %]]></script>

                <p>There are ??? main approaches for solving the multi-feature newsvendor problem with data features. 
                First, the classical approach obtains an estimate of the demand's probability distribution and then uses the classical optimization model to obtain the order quantities. This approach is called separated estimation and optimization (SEO).
                However, obtaining the probability distribution with any approximation procedure involves some level of errors, especially when there are insufficient historical data. 
                In addition, sometimes there is not enough data to approximate a probability distribution. 
                So, in each of these cases, the classical approach cannot be used.</p> 
                
                <p>Second, \cite{Thiele} proposes a data driven algorithm that directly optimizes the order quantities through finding Estimated Quantile (EQ).
                However, this model fails when there is volatility among the training data. 
                In addition, similar to the classical newsvendor algorithm, it only considers categorical features and cannot deal with continuous features, which are common in supply chain demand data.</p> 

                <p>Finally, machine learning and Deep Neural Network (DNN) models have been proposed to obtain a forecast of the demand, e.g. \cite{lu2014hybrid}.
                Most of these approaches set order quantities equal to the demand forecast. However, this ignores a core insight from the newsvendor model, namely, that order quantities should be larger (or, in rarer cases, smaller) than the demand forecast, with the actual quantity driven by the relative magnitudes of the shortage and holding costs. 
                To address this drawback, \cite{vahn_News} proposes a Linear Machine Learning (LML) model, which considers the cost coefficients to obtain order quantities.
                However, this model is too slow for a large number of instances, has poor quality when there are small number of observations for each combination of the features, and its learning is limited to the current training data. 
                Therefore, there is a need for an algorithm that works with both small and large amounts of featured-historical data and solve them in a reasonable amount of time.</p> 

                <p> <em>  <b> Our Approach  </b> </em> <p>
                <p> We develop a new approach based on Deep Neural Network (DNN) to solve the multi-product newsvendor problem with data features. 
                DNN is a branch of machine learning which aimed to build a model between inputs and outputs. 
                In order to minimize the closeness of the obtained values and the real outputs, a loss function, e.g. hinge, euclidean, etc. measures the closeness of them.
                The goal of DNN is providing a small loss value.
                To adapt DNN for the newsvendor problem, we propose two loss functions, considering the impact of the shortage and holding costs. 
                These loss functions <i>allow DNN to obtain the minimizer of the newsvendor cost function directly, rather than first estimating the demand distribution and then choosing an order quantity.</i>
                Thus, feeding the historical data into the corresponding DNN and running it gives the order quantities directly.
                Two proposed loss functions are based on the newsvendor cost function and we call them DNN-$\ell_1$ and DNN-$\ell_2$, according to their structures. </p>



                <p> <em> <b> Conclusion </b> </em> <p>
                    These results are really incredible!!!. We can learn to play close to optimal solution, with just---and only just---some historical data. Without any knowledge how other agents play, what is their ordering policy, etc. 
                    Nowadays that any company has huge datasets, we can easily use those data and optimize their supply chain network. This approach can be easily used in different supply chain with much more complex networks, and more agents. 
                    I will post more results latter. BTW, you also can read the corresponding paper <a href="https://arxiv.org/abs/1708.05924">here </a>.!


                    Porteus, Evan L. "The newsvendor problem." Building Intuition. Springer, Boston, MA, 2008. 115-134.
                    Snyder, Lawrence V., and Zuo-Jun Max Shen. Fundamentals of supply chain theory. John Wiley \& Sons, 2011.

                <!-- <iframe width="420" height="315" src="https://www.youtube.com/embed/XGSy3_Czz8k"> </iframe> -->                
            </div><!-- /.blurb -->
        </div><!-- /.container -->


    <div id="main" class="content" role="main" itemprop="mainContentOfPage" itemscope itemtype="https://schema.org/Blog">
        <div class="container">
            <div class="row">
                <article class="post col-md-8 col-md-offset-2 hentry" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
                


                    <div class="post-body bordered-bottom" itemprop="description">
                    

                        <h1 id="1-you-should-have-a-github-pages-by-using-usernamegithubio-or-use-project-pages">1. you should have a github pages by using username.github.io or use project pages</h1>
<h1 id="2-fork-a-jekyll-theme-that-you-like-or-just-create-from-scratch-yourself">2. Fork a jekyll theme that you like or just create from scratch yourself,</h1>
<p>I forked from <a href="https://github.com/hmfaysal/hmfaysal-omega-theme">hmfaysal-omega-theme</a>
This theme already enabled the mathjax/latex</p>
<h1 id="3-if-you-create-a-new-one-by-yourself-you-should-do-this">3. If you create a new one by yourself, you should do this:</h1>
<ul>
  <li>in <code class="highlighter-rouge">_config.yml</code>, use <code class="highlighter-rouge">markdown: kramdown</code></li>
  <li>in <code class="highlighter-rouge">_layouts/home.html</code> or <code class="highlighter-rouge">_includes/head.html</code> add:</li>
</ul>


<ul>
  <li>add <code class="highlighter-rouge">mathjax: true</code> in your post</li>
  <li>test your website, it maybe not working on latex/mathjax</li>
</ul>

<h1 id="problems-and-solutions">Problems and solutions</h1>

<ul>
  <li>
    <p>I forked this theme and I see the origin theme support mathjax/latex, but it is nothing in my theme, all the source
code are the same, but why, why my forked jekyll theme not support mathjax/latex, why my forked jekyll not showing
like the origin.</p>
  </li>
  <li>
    <p>I notice that the chrome show that <code class="highlighter-rouge">This page is trying to load scripts from unauthenticated sources</code> in top right of
the address bar, when I click to load the script, the chrome show that this site is unsafe, and the site bar become
red.</p>
  </li>
  <li>So how to enable your github pages support   <code class="highlighter-rouge">https</code>,
just <strong>replace all the http</strong> to <strong>https</strong>.</li>
  <li>Done</li>
</ul>

<p>See this:</p>

<p><strong>The Lorenz Equations</strong></p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{aligned}
\dot{x} & = \sigma(y-x) \\
\dot{y} & = \rho x - y - xz \\
\dot{z} & = -\beta z + xy
\end{aligned} %]]></script>

<p><strong>The Cauchy-Schwarz Inequality</strong></p>

<script type="math/tex; mode=display">\left( \sum_{k=1}^n a_k b_k \right)^{\!\!2} \leq
 \left( \sum_{k=1}^n a_k^2 \right) \left( \sum_{k=1}^n b_k^2 \right)</script>

<p><strong>A Cross Product Formula</strong></p>

<script type="math/tex; mode=display">% <![CDATA[
\mathbf{V}_1 \times \mathbf{V}_2 =
   \begin{vmatrix}
    \mathbf{i} & \mathbf{j} & \mathbf{k} \\
    \frac{\partial X}{\partial u} & \frac{\partial Y}{\partial u} & 0 \\
    \frac{\partial X}{\partial v} & \frac{\partial Y}{\partial v} & 0 \\
   \end{vmatrix} %]]></script>

<p><strong>The probability of getting (k) heads when flipping (n) coins is:</strong></p>

<script type="math/tex; mode=display">P(E) = {n \choose k} p^k (1-p)^{ n-k}</script>


                </article>
            </div>
        </div>
    </div>



<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'shortname'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

     <footer>
        <ul>
            <li><a href="mailto:oroojlooy@gmail.com">email</a></li>
            <!-- <li><a href="https://github.com/oroojlooy">github.com/oroojlooy</a></li> -->
            <li><a href="https://scholar.google.com/citations?user=7nEdMAMAAAAJ&hl=en">Google Scholar</a></li>
            <li><a href="https://www.linkedin.com/in/afshin-oroojlooy-81663b38/">LinkedIn</a></li>
        </ul>
    </footer>       
</body>
</html>
